# 项目治理原则

## 核心开发原则

### 技术栈标准
- **框架**: Next.js 14+ with App Router
- **UI 库**: shadcn/ui + Radix UI
- **样式**: Tailwind CSS (语义化 CSS 变量)
- **语言**: TypeScript 严格模式
- **包管理**: pnpm (强制要求)
- **状态管理**: React Hooks + Context + Zustand
- **表单**: React Hook Form + Zod
- **数据获取**: TanStack Query
- **测试**: Vitest + React Testing Library

### 代码质量标准

#### TypeScript 要求
- 启用严格模式 (`strict: true`)
- 类型覆盖率 > 95%
- 避免使用 `any` 类型
- 提供完整的接口定义
- 使用泛型提高代码复用性

#### 组件开发规范
- 使用 `React.forwardRef` 确保 ref 传递
- 设置 `displayName` 便于调试
- 支持 `className` 属性进行样式定制
- 使用 `cva` (class-variance-authority) 处理变体
- 提供完整的 JSDoc 注释

#### 样式规范
- 优先使用 Tailwind CSS 实用类
- 使用语义化 CSS 变量 (`hsl(var(--primary))`)
- 实现响应式设计 (mobile-first)
- 支持暗色模式 (`dark:` 前缀)
- 避免自定义 CSS，除非必要

### 可访问性标准

#### WCAG 2.1 AA 合规
- 确保足够的颜色对比度 (4.5:1)
- 提供键盘导航支持
- 添加适当的 ARIA 属性
- 支持屏幕阅读器
- 实现焦点管理

#### 语义化 HTML
- 使用正确的 HTML 语义标签
- 提供清晰的标题层级
- 确保表单标签正确关联
- 实现跳转链接和地标

### 性能优化原则

#### 渲染优化
- 使用 `React.memo` 防止不必要重渲染
- 合理使用 `useMemo` 和 `useCallback`
- 实现组件懒加载 (`React.lazy`)
- 优化图片加载 (Next.js Image)

#### 代码分割
- 路由级别的代码分割
- 动态导入第三方库
- 优化 bundle 大小
- 实现渐进式加载

### 测试策略

#### 测试覆盖要求
- 单元测试覆盖率 > 80%
- 组件渲染测试
- 用户交互测试
- 可访问性测试
- 边界条件测试

#### 测试工具和方法
- 使用 Vitest 作为测试运行器
- React Testing Library 进行组件测试
- user-event 模拟用户交互
- axe-core 进行可访问性测试

### 开发工作流

#### Git 工作流
- 使用功能分支开发
- 提交信息遵循约定式提交
- 代码审查必须通过
- 自动化 CI/CD 流程

#### 代码审查标准
- 代码质量和可维护性
- 性能优化机会
- 安全性检查
- 可访问性合规
- 测试覆盖率

### 包管理规范

#### pnpm 强制使用
- 所有依赖安装使用 pnpm
- 利用 pnpm 的硬链接优势
- 避免幽灵依赖问题
- 使用工作区管理多包项目

#### 依赖管理
- 定期更新依赖包
- 进行安全审计
- 控制 bundle 大小
- 避免重复依赖

### 文档标准

#### 代码文档
- 提供完整的 JSDoc 注释
- 包含使用示例
- 说明参数和返回值
- 记录已知限制和注意事项

#### 项目文档
- 维护最新的 README
- 提供开发指南
- 记录架构决策
- 包含故障排除指南

### 安全原则

#### 数据安全
- 验证所有用户输入
- 防止 XSS 和 CSRF 攻击
- 安全地处理敏感数据
- 实现适当的错误处理

#### 依赖安全
- 定期进行安全审计
- 及时更新有漏洞的依赖
- 使用可信的包源
- 避免使用过时的包

## AI Agent 开发指导

### Claude Code 使用原则
- 充分利用深度上下文理解能力
- 要求详细的实现说明和文档
- 进行多轮迭代优化
- 重视代码质量和最佳实践

### 其他 AI Agent 使用原则
- 根据任务复杂度选择合适的 Agent
- 提供清晰的上下文和要求
- 验证生成代码的质量
- 确保符合项目标准

### Slash Commands 工作流
- 遵循推荐的命令执行顺序
- 确保每个阶段的输出质量
- 进行跨阶段的一致性检查
- 记录决策过程和变更原因

## 持续改进

### 定期评估
- 代码质量指标监控
- 性能基准测试
- 用户体验评估
- 开发效率分析

### 标准更新
- 根据技术发展更新标准
- 收集团队反馈改进流程
- 学习行业最佳实践
- 适应项目需求变化

---

*本治理原则是项目开发的基础指导，所有开发活动都应遵循这些原则。如有疑问或建议，请通过项目沟通渠道讨论。*